<?xml version="1.0" encoding="UTF-8"?>
<svg width="800" height="500" viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
  <!-- Sfondo -->
  <rect width="800" height="500" fill="#f8f9fa" rx="8" ry="8"/>
  
  <!-- Titolo -->
  <text x="400" y="40" font-family="Montserrat, sans-serif" font-size="20" font-weight="bold" text-anchor="middle" fill="#0A2342">
    Architettura MERL-T
  </text>
  
  <!-- INPUT -->
  <rect x="350" y="80" width="100" height="40" rx="20" ry="20" fill="#dee2e6" stroke="#adb5bd" stroke-width="1"/>
  <text x="400" y="105" font-family="Montserrat, sans-serif" font-size="14" text-anchor="middle" fill="#0A2342">
    INPUT
  </text>
  
  <!-- NER -->
  <rect x="350" y="140" width="100" height="40" rx="5" ry="5" fill="#e9ecef" stroke="#adb5bd" stroke-width="1"/>
  <text x="400" y="165" font-family="Montserrat, sans-serif" font-size="14" text-anchor="middle" fill="#0A2342">
    NER
  </text>
  
  <!-- Router MoE -->
  <rect x="300" y="200" width="200" height="60" rx="10" ry="10" fill="#0077CC" stroke="#0A2342" stroke-width="2"/>
  <text x="400" y="235" font-family="Montserrat, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#ffffff">
    Router MoE
  </text>
  
  <!-- Frecce da Input a NER a Router -->
  <line x1="400" y1="120" x2="400" y2="140" stroke="#adb5bd" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="400" y1="180" x2="400" y2="200" stroke="#adb5bd" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Definizione freccia -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#adb5bd"/>
    </marker>
  </defs>
  
  <!-- Modulo Principi -->
  <rect x="100" y="320" width="180" height="60" rx="8" ry="8" fill="#4A90E2" stroke="#0A2342" stroke-width="2"/>
  <text x="190" y="355" font-family="Montserrat, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#ffffff">
    Modulo Principi
  </text>
  
  <!-- Modulo Regole -->
  <rect x="520" y="320" width="180" height="60" rx="8" ry="8" fill="#4A90E2" stroke="#0A2342" stroke-width="2"/>
  <text x="610" y="355" font-family="Montserrat, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#ffffff">
    Modulo Regole
  </text>
  
  <!-- Frecce dal Router ai Moduli -->
  <line x1="340" y1="260" x2="190" y2="320" stroke="#adb5bd" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="460" y1="260" x2="610" y2="320" stroke="#adb5bd" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Sintetizzatore MoE -->
  <rect x="300" y="400" width="200" height="60" rx="10" ry="10" fill="#0077CC" stroke="#0A2342" stroke-width="2"/>
  <text x="400" y="435" font-family="Montserrat, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#ffffff">
    Sintetizzatore MoE
  </text>
  
  <!-- Frecce dai Moduli al Sintetizzatore -->
  <line x1="190" y1="380" x2="340" y2="420" stroke="#adb5bd" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="610" y1="380" x2="460" y2="420" stroke="#adb5bd" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Knowledge Graph -->
  <ellipse cx="400" cy="300" rx="50" ry="30" fill="#ffffff" stroke="#0A2342" stroke-width="2" stroke-dasharray="5,5"/>
  <text x="400" y="305" font-family="Montserrat, sans-serif" font-size="12" text-anchor="middle" fill="#0A2342">
    Knowledge Graph
  </text>
  
  <!-- Connessioni al Knowledge Graph -->
  <line x1="400" y1="260" x2="400" y2="270" stroke="#0A2342" stroke-width="1" stroke-dasharray="3,3"/>
  <line x1="190" y1="320" x2="355" y2="300" stroke="#0A2342" stroke-width="1" stroke-dasharray="3,3"/>
  <line x1="610" y1="320" x2="445" y2="300" stroke="#0A2342" stroke-width="1" stroke-dasharray="3,3"/>
  
  <!-- Database Vettoriale -->
  <rect x="700" y="250" width="80" height="40" rx="5" ry="5" fill="#ffffff" stroke="#0A2342" stroke-width="1"/>
  <line x1="700" y1="260" x2="780" y2="260" stroke="#0A2342" stroke-width="1"/>
  <text x="740" y="280" font-family="Montserrat, sans-serif" font-size="10" text-anchor="middle" fill="#0A2342">
    Vector DB
  </text>
  
  <!-- Connessione al DB Vettoriale -->
  <line x1="610" y1="330" x2="700" y2="270" stroke="#0A2342" stroke-width="1" stroke-dasharray="3,3"/>
  
  <!-- API -->
  <rect x="700" y="310" width="80" height="40" rx="5" ry="5" fill="#ffffff" stroke="#0A2342" stroke-width="1"/>
  <text x="740" y="335" font-family="Montserrat, sans-serif" font-size="10" text-anchor="middle" fill="#0A2342">
    API Esterne
  </text>
  
  <!-- Connessione alle API -->
  <line x1="610" y1="350" x2="700" y2="330" stroke="#0A2342" stroke-width="1" stroke-dasharray="3,3"/>
  
  <!-- OUTPUT -->
  <rect x="350" y="480" width="100" height="40" rx="20" ry="20" fill="#dee2e6" stroke="#adb5bd" stroke-width="1"/>
  <text x="400" y="505" font-family="Montserrat, sans-serif" font-size="14" text-anchor="middle" fill="#0A2342">
    OUTPUT
  </text>
  
  <!-- Freccia dal Sintetizzatore all'Output -->
  <line x1="400" y1="460" x2="400" y2="480" stroke="#adb5bd" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Legenda -->
  <rect x="20" y="20" width="120" height="85" rx="5" ry="5" fill="#ffffff" stroke="#adb5bd" stroke-width="1"/>
  <text x="80" y="40" font-family="Montserrat, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#0A2342">
    Legenda
  </text>
  
  <rect x="30" y="50" width="15" height="15" fill="#0077CC"/>
  <text x="55" y="62" font-family="Open Sans, sans-serif" font-size="10" fill="#0A2342" text-anchor="start">
    Componenti MoE
  </text>
  
  <rect x="30" y="75" width="15" height="15" fill="#4A90E2"/>
  <text x="55" y="87" font-family="Open Sans, sans-serif" font-size="10" fill="#0A2342" text-anchor="start">
    Moduli Esperti
  </text>
</svg>