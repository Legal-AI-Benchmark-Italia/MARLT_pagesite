<?xml version="1.0" encoding="UTF-8"?>
<svg width="600" height="300" viewBox="0 0 600 300" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="600" height="300" fill="#f1f3f5" rx="8" ry="8"/>
  
  <!-- Title -->
  <text x="300" y="30" font-family="Montserrat, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#0A2342">
    Sintesi e Combinazione Risposte (Sintetizzatore MoE)
  </text>
  
  <!-- Inputs from Previous Stage -->
  <g transform="translate(0, 60)">
    <!-- Risposta Principi (Left Input) -->
    <rect x="40" y="0" width="200" height="60" rx="5" ry="5" fill="#ffffff" stroke="#4A90E2" stroke-width="2"/>
    <text x="140" y="35" font-family="Open Sans, sans-serif" font-size="12" text-anchor="middle" fill="#495057">
      Risposta Modulo Principi
    </text>
    
    <!-- Risposta Regole (Right Input) -->
    <rect x="360" y="0" width="200" height="60" rx="5" ry="5" fill="#ffffff" stroke="#4A90E2" stroke-width="2"/>
    <text x="460" y="35" font-family="Open Sans, sans-serif" font-size="12" text-anchor="middle" fill="#495057">
      Risposta Modulo Regole
    </text>
  </g>
  
  <!-- Flow Arrows to Synthesizer -->
  <path d="M140,120 L190,140 L300,140" stroke="#0077CC" stroke-width="2" marker-end="url(#arrow)"/>
  <path d="M460,120 L410,140 L300,140" stroke="#0077CC" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- Sintetizzatore MoE -->
  <rect x="200" y="140" width="200" height="70" rx="8" ry="8" fill="#0077CC" stroke="#0A2342" stroke-width="2"/>
  <text x="300" y="170" font-family="Montserrat, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#ffffff">
    Sintetizzatore MoE
  </text>
  <text x="300" y="190" font-family="Open Sans, sans-serif" font-size="10" text-anchor="middle" fill="#ffffff">
    Addestrato tramite RLCF
  </text>
  
  <!-- Strategy Box -->
  <rect x="160" y="220" width="280" height="35" rx="5" ry="5" fill="#e9ecef" stroke="#0077CC" stroke-width="1" stroke-dasharray="2,2"/>
  <text x="300" y="243" font-family="Open Sans, sans-serif" font-size="12" text-anchor="middle" fill="#495057">
    Strategia: Combinazione con priorità a fonti specifiche
  </text>
  
  <!-- Output -->
  <rect x="150" y="260" width="300" height="40" rx="5" ry="5" fill="#ffffff" stroke="#0077CC" stroke-width="2"/>
  <text x="300" y="275" font-family="Montserrat, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#0A2342">
    Risposta Finale Provvisoria
  </text>
  <text x="300" y="290" font-family="Open Sans, sans-serif" font-size="10" text-anchor="middle" fill="#495057">
    "La simulazione del contratto è un istituto giuridico che..."
  </text>
  
  <!-- Flow Arrow from Synthesizer to Output -->
  <path d="M300,210 L300,260" stroke="#0077CC" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- Arrow Definition -->
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#0077CC"/>
    </marker>
  </defs>
</svg>